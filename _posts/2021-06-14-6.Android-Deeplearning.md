---
title: 6.Android - Deeplearning Classification model
excerpt: Android


#최상위 사진
header:
  #image: /assets/images/moon3.png
  teaser: /assets/images/moon3-th.png

gallery:
  - url: /assets/images/unsplash-gallery-image-1.jpg
    image_path: assets/images/unsplash-gallery-image-1-th.jpg
    alt: "placeholder image 1"
  - url: /assets/images/unsplash-gallery-image-2.jpg
    image_path: assets/images/unsplash-gallery-image-2-th.jpg
    alt: "placeholder image 2"
  - url: /assets/images/unsplash-gallery-image-3.jpg
    image_path: assets/images/unsplash-gallery-image-3-th.jpg
    alt: "placeholder image 3"
    


 #사이드바 설정 
sidebar:
  - title: "Role"
    nav: sidebar-sample

# 해당 글 목차
toc: true
toc_sticky: true

toc_label: "Yimsu's Blog"
toc_icon: "cog"


## 테그설정

categories:
  - Android
  - Portfolio
  
tags:
  - Android
  - "2021"
  - "2021.06"



---

Android - Classification model

<br/>

### 1. Espresso 

<br/>

안드로이드 UI를 테스트하는 오픈 소스 프레임워크

<br/>


<br/>


``` java


 dependencies {
        androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0'




implementation('org.tensorflow:tensorflow-lite:0.0.0-nightly') { changing = true } // 딥러닝 모델 추가 시
implementation('org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly') { changing = true }
implementation('org.tensorflow:tensorflow-lite-support:0.0.0-nightly') { changing = true }


    }




```


<br/>


<br/>


### 2.  Label 출력.하나로 수정

<br/>


```


                    // creating a list of string to display in list view ====***====
                    final List<String> predicitonsList = new ArrayList<>();


//                    for (ImageClassifier.Recognition reco : predictions) {
//                        predicitonsList.add(reco.getName() + "  ::::::::::  " + reco.getConfidence());
//
//                    } // 전체 확률 보여주기


//                    predicitonsList.add( "Type." + predictions.get(0).getName() +",   Prediction"
//                            + predictions.get(0).getConfidence() ); // 분류 타입과 확률 보여주기

                    predicitonsList.add( "Type = " + predictions.get(0).getName() ); // 분류 타입만 보여주기





```




<br/>


<br/>


### 3. tf lite 모델 만들기

<br/>


Feature 벡터를 사용하여 TF lite 모델을 만든 후 양자화로 크기를 줄인다 

그 후 안드로이드 스튜디오로 load

<br/>


```

MappedByteBuffer classifierModel = FileUtil.loadMappedFile(activity,
        "model.tflite");
// Loads labels out from the label file.
labels = FileUtil.loadLabels(activity, "labels.txt");



```


<br/>

<br/>




### 4. 결과 

<br/>


<br/>

![image](/assets/images/computervision/skinApp1.png)

<br/>

<br/>

![image](/assets/images/computervision/skinApp2.png)


